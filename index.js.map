{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/helpers.js","../src/js/products-api.js","../src/js/modal.js","../src/js/render-function.js","../src/js/storage.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n    categories: document.querySelector(\".categories\"),\n    products: document.querySelector(\".products\"),\n    input: document.querySelector('.search-form__input'),\n    form: document.querySelector('.search-form'),\n    notFound: document.querySelector('.not-found'),\n    modalProduct: document.querySelector('.modal-product'),\n    modalWindow: document.querySelector('.modal'),\n    modalCloseBtn: document.querySelector('.modal__close-btn'),\n};\n","import { refs } from \"./refs\";\n\n//Допоміжні функції\nexport function clearProducts() {\n    refs.products.innerHTML = \"\";\n}\n\n","import axios from \"axios\";\n\n// Функції для роботи з бекендом\naxios.defaults.baseURL = 'https://dummyjson.com/products';\n\nexport async function fetchCategories() {\n    try {\n        const data = await axios.get('/category-list').then((data) => { return data.data });\n        console.log('fetchCategories', data);\n        return data;\n    }\n    catch (error) {\n        console.log(`fetch categories ${error}`);  \n}\n};\n\nexport async function fetchAllProducts(page = 1) {\n    try {\n        const data = await axios.get(`?limit=12&skip=${(page - 1) * 12}`).then((data) => {\n\n            return data.data\n        });\n        console.log('fetchAllProducts', data);\n        \n           return data;\n        \n    }\n    catch (error) {\n        console.log(`fetch all products ${error}`);     \n}\n};\n\nexport async function fetchProductsById(id) {\n    try {\n        const data = await axios.get(`${id}`).then((data) => { return data.data });\n        console.log('fetchProductsById', data);\n        \n           return data;\n        \n    }\n    catch (error) {\n        console.log(`fetch products by id ${error}`);     \n}\n};\n\nexport async function fetchProductsByQuery(query) {\n    try {\n        const data = await axios.get(`search?q=${query}`).then((data) => { return data.data });\n        console.log('fetchProductsByQuery', data);\n        \n           return data;\n        \n    }\n    catch (error) {\n        console.log(`fetch products by query ${error}`);     \n}\n};\n\nexport async function fetchProductsByCategory(category, page = 1) {\n    try {\n        const data = await axios.get(`category/${category}?limit=12&skip=${(page - 1) * 12}`).then((data) => { return data.data });\n        console.log('fetchProductsByCategory', data);\n        \n           return data;\n        \n    }\n    catch (error) {\n        console.log(`fetch products by category ${error}`);     \n}\n};\n\n","import { refs } from \"./refs\";\n\n//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\nfunction addModalListerners() {\n    refs.modalWindow.addEventListener('click', handleBackdropClickClose);\n    refs.modalCloseBtn.addEventListener('click', modalClose);\n    document.addEventListener('keydown', handleEscapeClose);\n}\n\nexport function removeModalListerners() {\n   refs.modalWindow.removeEventListener('click', handleBackdropClickClose);\n    refs.modalCloseBtn.removeEventListener('click', modalClose);\n    document.removeEventListener('keydown', handleEscapeClose);\n}\n\nexport function modalOpen() {\n    refs.modalWindow.classList.add('modal--is-open');\n    addModalListerners();\n}\n\nexport function modalClose() {\n    refs.modalWindow.classList.remove('modal--is-open');\n    removeModalListerners();\n}\n\nfunction handleEscapeClose(event) {\n    if (event.key === 'Escape') {\n        modalClose();       \n    }\n    else {\n        return;\n    }\n}\n\nfunction handleBackdropClickClose(event) {\n    if (event.target === refs.modalWindow) {\n        modalClose();\n    }\n    else {\n        return;\n    }\n}","// Функцію для створення, рендеру або видалення розмітки\nimport { modalOpen } from './modal';\nimport { fetchCategories, fetchProductsById } from './products-api';\nimport { refs } from './refs';\n\nexport async function renderCategories(div) {\n    try {\n        div.innerHTML = \"\";\n    const data = await fetchCategories();\n    const markup = data\n      .map((i) => {return `<li class=\"categories__item\">\n <button class=\"categories__btn\" type=\"button\">${i}</button>\n</li>`;\n      })\n        .join('');\n        div.insertAdjacentHTML(\"beforeEnd\", markup);\n  } catch (error) {\n    console.log(`render categories ${error}`);\n  }\n};\n\nexport async function renderProducts(apiFunction, div) {\n    try {\n        div.innerHTML = \"\";\n        const data = await apiFunction;\n        const markup = data.products.map((i) => { \nreturn `<li class=\"products__item\" data-id=\"${i.id}\">\n    <img class=\"products__image\" src=\"${i.thumbnail}\" alt=\"${i.title}\"/>\n    <p class=\"products__title\">${i.title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${i.brand}</span></p>\n    <p class=\"products__category\">Category: ${i.category}</p>\n    <p class=\"products__price\">Price: ${i.price}$</p>\n </li>`\n        }).join(\"\");\n div.insertAdjacentHTML(\"beforeEnd\", markup);\n    }\n    catch(error) {\n        console.log(`render products ${error}`);\n    }\n};\n\nexport async function renderProductById(div, id) {\n      try {\n        div.innerHTML = \"\";\n        const data = await fetchProductsById(id);\n        const markup = `<img class=\"modal-product__img\" src=\"${data.thumbnail}\" alt=\"${data.title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${data.title}</p>\n        <ul class=\"modal-product__tags\">${data.tags}</ul>\n        <p class=\"modal-product__description\">${data.description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${data.shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${data.returnPolicy}</p>\n        <p class=\"modal-product__price\">Price: ${data.price}$</p>\n      </div>`;\n    \n        div.insertAdjacentHTML(\"beforeEnd\", markup);\n        modalOpen();\n    }\n    catch(error) {\n        console.log(`render products ${error}`);\n    }\n}","//Робота з loacalStorage\nexport function saveToLocalStorage(key, value) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\n\nexport function loadFromLocalStorage(key) {\n  try {\n    return JSON.parse(localStorage.getItem(key));\n  } catch (error) {\n    console.log(`load from local storage ${error}`);\n  }\n}\n\nexport function removeFromLocalStorage(key) {\n    localStorage.removeItem(key);\n}","import { clearProducts } from \"./helpers\";\nimport { fetchProductsByCategory, fetchProductsByQuery } from \"./products-api\";\nimport { refs } from \"./refs\";\nimport { renderProductById, renderProducts } from \"./render-function\";\nimport { removeFromLocalStorage, saveToLocalStorage } from \"./storage\";\n\n// Функції, які передаються колбеками в addEventListners\nexport function searchProducts(event) {\n    refs.notFound.classList.remove(\"not-found--visible\");\n    event.preventDefault();\n    const query = refs.input.value.trim();\n    removeFromLocalStorage('searchKey');\n    try {\n        fetchProductsByQuery(query)\n            .then(data => {\n                if (data.products.length > 0) {\n                    renderProducts(fetchProductsByQuery(query), refs.products)\n                }\n                else {\n                    clearProducts();\n                    refs.notFound.classList.add(\"not-found--visible\");\n                }\n            }\n            )\n        }\n    catch (error) {\n        console.log(`searchProducts ${error}`); \n    };\n    refs.input.value = '';\n};\n\nexport function saveInputData() {\n    saveToLocalStorage('searchKey', refs.input.value);\n};\n\nexport function loadCategory(event) {\n    if (event.target.classList.contains('categories__btn')) {\n        renderProducts(fetchProductsByCategory(event.target.textContent), refs.products);\n    }\n};\n\nexport function loadProduct(event) {\n    const card = event.target.closest('.products__item');\n    if (card && refs.products.contains(card)) {\n        const productId = card.dataset.id;\n        renderProductById(refs.modalProduct, productId);\n    }\n    else {\n        return\n    }\n};","import { loadCategory, loadProduct, saveInputData, searchProducts } from \"./js/handlers\";\nimport { fetchAllProducts, fetchCategories, fetchProductsByCategory, fetchProductsById, fetchProductsByQuery } from \"./js/products-api\";\nimport { refs } from \"./js/refs\";\nimport { renderCategories, renderProducts } from \"./js/render-function\";\nimport { loadFromLocalStorage, removeFromLocalStorage } from \"./js/storage\";\n\n//Логіка сторінки Home\n\nrenderCategories(refs.categories);\n\nrenderProducts(fetchAllProducts(1), refs.products);\n\nrefs.input.value = loadFromLocalStorage('searchKey') ? loadFromLocalStorage('searchKey') : '';\n\nrefs.input.addEventListener('input', saveInputData);\n\nrefs.form.addEventListener('submit', searchProducts);\n\nrefs.categories.addEventListener('click', loadCategory);\n\nfetchProductsById(2);\n\nrefs.products.addEventListener('click', loadProduct);"],"names":["refs","clearProducts","axios","fetchCategories","data","error","fetchAllProducts","page","fetchProductsById","id","fetchProductsByQuery","query","fetchProductsByCategory","category","addModalListerners","handleBackdropClickClose","modalClose","handleEscapeClose","removeModalListerners","modalOpen","event","renderCategories","div","markup","i","renderProducts","apiFunction","renderProductById","saveToLocalStorage","key","value","loadFromLocalStorage","removeFromLocalStorage","searchProducts","saveInputData","loadCategory","loadProduct","card","productId"],"mappings":"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"}