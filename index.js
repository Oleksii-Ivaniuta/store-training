import"./assets/styles-CwD8JiEY.js";import{a as n}from"./assets/vendor-N5iQpiFS.js";let d=1;const r={categories:document.querySelector(".categories"),products:document.querySelector(".products"),input:document.querySelector(".search-form__input"),form:document.querySelector(".search-form"),notFound:document.querySelector(".not-found"),modalProduct:document.querySelector(".modal-product"),modalWindow:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),main:document.getElementsByTagName("main")[0]};function y(){r.products.innerHTML=""}n.defaults.baseURL="https://dummyjson.com/products";async function f(){try{return await n.get("/category-list").then(e=>e.data)}catch(t){console.log(`fetch categories ${t}`)}}async function h(t=d){try{return await n.get(`?limit=12&skip=${(t-1)*12}`).then(o=>o.data)}catch(e){console.log(`fetch all products ${e}`)}}async function p(t){try{return await n.get(`${t}`).then(o=>o.data)}catch(e){console.log(`fetch products by id ${e}`)}}async function l(t){try{return await n.get(`search?q=${t}`).then(o=>o.data)}catch(e){console.log(`fetch products by query ${e}`)}}async function _(t=d,e){try{return await n.get(`category/${e}?limit=12&skip=${(t-1)*12}`).then(c=>c.data)}catch(o){console.log(`fetch products by category ${o}`)}}function $(){r.modalWindow.addEventListener("click",g),r.modalCloseBtn.addEventListener("click",s),document.addEventListener("keydown",m)}function L(){r.modalWindow.removeEventListener("click",g),r.modalCloseBtn.removeEventListener("click",s),document.removeEventListener("keydown",m)}function v(){r.modalWindow.classList.add("modal--is-open"),$()}function s(){r.modalWindow.classList.remove("modal--is-open"),L()}function m(t){if(t.key==="Escape")s();else return}function g(t){if(t.target===r.modalWindow)s();else return}async function b(t){try{t.innerHTML="";const o=(await f()).map(c=>`<li class="categories__item">
 <button class="categories__btn" type="button">${c}</button>
</li>`).join("");t.insertAdjacentHTML("beforeEnd",o)}catch(e){console.log(`render categories ${e}`)}}async function i(t,e){try{e.innerHTML="";const c=(await t).products.map(a=>`<li class="products__item" data-id="${a.id}">
    <img class="products__image" src="${a.thumbnail}" alt="${a.title}"/>
    <p class="products__title">${a.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand: ${a.brand}</span></p>
    <p class="products__category">Category: ${a.category}</p>
    <p class="products__price">Price: ${a.price}$</p>
 </li>`).join("");e.insertAdjacentHTML("beforeEnd",c)}catch(o){console.log(`render products ${o}`)}}async function P(t,e){try{t.innerHTML="";const o=await p(e),c=`<img class="modal-product__img" src="${o.thumbnail}" alt="${o.title}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o.title}</p>
        <ul class="modal-product__tags">${o.tags}</ul>
        <p class="modal-product__description">${o.description}</p>
        <p class="modal-product__shipping-information">Shipping: ${o.shippingInformation}</p>
        <p class="modal-product__return-policy">Return Policy: ${o.returnPolicy}</p>
        <p class="modal-product__price">Price: ${o.price}$</p>
      </div>`;t.insertAdjacentHTML("beforeEnd",c),v()}catch(o){console.log(`render products ${o}`)}}function S(t,e){localStorage.setItem(t,JSON.stringify(e))}function u(t){try{return JSON.parse(localStorage.getItem(t))}catch(e){console.log(`load from local storage ${e}`)}}function k(t){localStorage.removeItem(t)}function w(t){r.notFound.classList.remove("not-found--visible"),t.preventDefault();const e=r.input.value.trim();k("searchKey");try{l(e).then(o=>{o.products.length>0?i(l(e),r.products):(y(),r.notFound.classList.add("not-found--visible"))})}catch(o){console.log(`searchProducts ${o}`)}r.input.value=""}function E(){S("searchKey",r.input.value)}function C(t){t.target.classList.contains("categories__btn")&&i(_(d,t.target.textContent),r.products)}function q(t){const e=t.target.closest(".products__item");if(e&&r.products.contains(e)){const o=e.dataset.id;P(r.modalProduct,o)}else return}b(r.categories);i(h(1),r.products);r.input.value=u("searchKey")?u("searchKey"):"";r.input.addEventListener("input",E);r.form.addEventListener("submit",w);r.categories.addEventListener("click",C);p(2);r.products.addEventListener("click",q);
//# sourceMappingURL=index.js.map
